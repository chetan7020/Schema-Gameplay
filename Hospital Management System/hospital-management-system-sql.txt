-- Users Table (Base entity)
CREATE TABLE Users (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL
);

-- Doctor inherits from Users
CREATE TABLE Doctor (
    user_id INT PRIMARY KEY,
    FOREIGN KEY (user_id) REFERENCES Users(user_id)
);

-- Ward Table
CREATE TABLE Ward (
    ward_id INT PRIMARY KEY AUTO_INCREMENT,
    ward_name VARCHAR(100) NOT NULL
);

-- Patient inherits from Users
CREATE TABLE Patient (
    user_id INT PRIMARY KEY,
    ward_id INT,
    FOREIGN KEY (user_id) REFERENCES Users(user_id),
    FOREIGN KEY (ward_id) REFERENCES Ward(ward_id)
);

-- Appointment Table
CREATE TABLE Appointment (
    appointment_id INT PRIMARY KEY AUTO_INCREMENT,
    doctor_id INT NOT NULL,
    patient_id INT NOT NULL,
    FOREIGN KEY (doctor_id) REFERENCES Doctor(user_id),
    FOREIGN KEY (patient_id) REFERENCES Patient(user_id)
);

-- Prescription Table (One-to-One with Appointment)
CREATE TABLE Prescription (
    prescription_id INT PRIMARY KEY AUTO_INCREMENT,
    appointment_id INT UNIQUE,
    FOREIGN KEY (appointment_id) REFERENCES Appointment(appointment_id)
);

-- Medicine Table
CREATE TABLE Medicine (
    medicine_id INT PRIMARY KEY AUTO_INCREMENT,
    medicine_name VARCHAR(100) NOT NULL
);

-- Junction table for Many-to-Many (Prescription â†” Medicine)
CREATE TABLE Prescription_Medicine (
    prescription_id INT,
    medicine_id INT,
    PRIMARY KEY (prescription_id, medicine_id),
    FOREIGN KEY (prescription_id) REFERENCES Prescription(prescription_id),
    FOREIGN KEY (medicine_id) REFERENCES Medicine(medicine_id)
);
